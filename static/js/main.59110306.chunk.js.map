{"version":3,"sources":["utils.js","Error.js","values.js","data sync /^/.//v.*//Attack/.json$","data sync /^/.//v.*//Archer/.json$","data sync /^/.//v.*//Cavalry/.json$","data sync /^/.//v.*//Conquering/.json$","data sync /^/.//v.*//Defense/.json$","data sync /^/.//v.*//Garrison/.json$","data sync /^/.//v.*//Gathering/.json$","data sync /^/.//v.*//Infantry/.json$","data sync /^/.//v.*//Integration/.json$","data sync /^/.//v.*//Leadership/.json$","data sync /^/.//v.*//Mobility/.json$","data sync /^/.//v.*//Peacekeeping/.json$","data sync /^/.//v.*//Skill/.json$","data sync /^/.//v.*//Support/.json$","data sync /^/.//v.*//Versatility/.json$","serviceWorker.js","GuidedTour.js","NavBarButtons.js","Tooltips.js","NavBarSettings.js","NavBarCommander.js","Announcement.js","Modals.js","NavBar.js","SummaryPanel.js","StatsPanel.js","StatsTalentsPanel.js","InfoPanel.js","data/AllTrees.js","App.js","index.js"],"names":["sumArray","arr","reduce","partial","a","isMultidimensional","filter","Array","isArray","length","getMaxTalentCount","talentValues","replaceTalentText","text","replacementIdx","newText","i","re","RegExp","replace","getTreeName","color","commander","commanderData","Commanders","setTitle","r","y","b","sep","newTitle","createSummaryString","title","document","rSpent","ySpent","bSpent","name","shortName","getURL","embed","window","location","origin","search","isEmbed","path","includes","isTouchDevice","matchMedia","matches","isNewUser","localStorage","getItem","JSON","parse","isUpgrade","oldVer","newVer","split","map","Number","oldMajor","oldMinor","newMajor","newMinor","encode","match","v","valuesToLetters","hasOwnProperty","join","decode","encoded","k","lettersToValues","ErrorBoundary","props","state","error","errorInfo","this","setState","style","whiteSpace","toString","componentStack","children","Component","maxPoints","c","d","e","f","g","h","j","l","m","n","o","p","q","s","t","u","w","x","z","webpackContext","req","id","webpackContextResolve","__webpack_require__","Error","code","keys","Object","resolve","module","exports","Boolean","hostname","GuidedTour","restartTour","run","stepIndex","handleJoyrideCallback","data","action","index","status","type","STATUS","FINISHED","SKIPPED","ACTIONS","CLOSE","EVENTS","STEP_AFTER","TARGET_NOT_FOUND","PREV","steps","content","target","placement","disableBeacon","locale","last","callback","continuous","showProgress","showSkipButton","disableOverlayClose","styles","options","primaryColor","overlayColor","NavBarButtons","useState","isDownloading","setIsDownloading","className","data-testid","disabled","calcPointsSpent","onClick","showReset","icon","faTrashAlt","addLogo","addText","ReactGA","event","category","label","node","getElementById","dpr","devicePixelRatio","domtoimage","toJpeg","height","offsetHeight","width","offsetWidth","transform","transformOrigin","then","nodeDataUrl","watermark","process","dataUrl","treePanel","logo","context","getContext","alpha","scale","logoAspectRatio","logoResizedHeight","logoResizedWidth","save","globalAlpha","drawImage","restore","homepage","fontsize","font","measureText","fillStyle","textAlign","textBaseline","fillText","img","createElement","href","download","red","yellow","blue","body","appendChild","click","removeChild","destroy","takeScreenshot","Spinner","size","animation","variant","faCamera","showShare","faShareAlt","HelpTooltip","OverlayTrigger","flip","trigger","overlay","Tooltip","tooltip","faQuestionCircle","GeneralTooltip","NavBarSettings","nextProps","nextState","isShownInfoPanel","isShownValues","isShownTotals","isSpeedMode","isShownMouseXY","isShownTalentID","nodeSize","Dropdown","alignRight","as","NavItem","Toggle","NavLink","faCog","Menu","Form","Group","Header","Check","checked","onChange","toggleInfoPanel","toggleValueDisplay","toggleTotalDisplay","Divider","ToggleButtonGroup","value","val","toggleNodeSize","ToggleButton","toggleSpeedMode","NavBarCommander","isOpen","toggleSelect","bind","prevState","commanderList","sort","legendaryCommanders","epicCommanders","forEach","selectItem","Item","key","changeCommander","alt","src","tier","push","show","onToggle","createSelectItems","Announcement","InvalidBuildModal","modal","toggle","Modal","centered","onHide","closeButton","faExclamationTriangle","Body","message","Footer","Button","AnnouncementModal","isInvalidBuild","faBullhorn","bugs","url","rel","faInfoCircle","AboutModal","contributors","Tabs","defaultActiveKey","Tab","eventKey","version","author","getContributors","showDonate","toggleAnnounce","toggleTour","ResetModal","resetTalents","ShareModal","input","readOnly","select","execCommand","innerHTML","faLink","defaultValue","copyURL","faCopy","shareSocial","EmailShareButton","EmailIcon","round","RedditShareButton","RedditIcon","TwitterShareButton","TwitterIcon","WeiboShareButton","WeiboIcon","WhatsappShareButton","WhatsappIcon","PocketShareButton","PocketIcon","faCode","rows","copyEmbedURL","NavBar","navOpen","toggleNav","aboutModalRef","resetModalRef","shareModalRef","ref","component","Navbar","Brand","minDeviceWidth","cursor","showAbout","Nav","toggleMouseXY","toggleTalentID","GuideIcon","guides","SummaryPanel","guide","getGuides","calcPointsRemaining","StatsPanel","allStats","stats","getAllStats","StatsTalentsPanel","isShownStatsTalents","toggleStatsTalents","talents","nodes","some","values","idx","talentInfo","treeData","Collapse","in","mainTalents","calcStatsTalents","InfoPanel","orientation","loadTreeData","Attack","require","Archer","Cavalry","Conquering","Defense","Garrison","Gathering","Infantry","Integration","Leadership","Mobility","Peacekeeping","Skill","Support","Versatility","TreePanel","React","lazy","App","invalidModalFlag","invalidBuildMessage","changeTalentValue","urlParams","slice","getEmptyState","dataVersion","updateURL","urlDataVersion","comID","parseInt","commanderName","find","createZeroTalents","maxArray","createMaxValueArray","el","treeName","talentData","stat","setItem","storage","getEmptyStats","Health","method","queryString","history","replaceState","zeroTalents","treePanelRef","drawLines","resetPanZoom","numRed","numYellow","numBlue","fill","valueIdx","how","talent","multiStat","newArr","newStats","curStat","points","repaint","toggleMouseListeners","tourRef","announceRef","fallback","infoPanelRef","self","top","initialize","pageview","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.59110306.chunk.js","sourcesContent":["import { valuesToLetters, lettersToValues } from './values';\nimport Commanders from './data/commanders.json';\nimport { title } from '../package.json';\n\n/**\n * Sum all values of an array\n *\n * @param {Number[]} arr Array to calculate sum of\n * @returns {Number} Sum of the array\n */\nexport function sumArray(arr) {\n  return arr.reduce((partial, a) => partial + a, 0);\n}\n\n/**\n * Check if two arrays are equal\n *\n * @param {array} a First array\n * @param {array} b Second array\n * @returns {boolean} Are the two arrays equal?\n */\nexport function arraysEqual(a, b) {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  // eslint-disable-next-line\n  if (a.length != b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\n/**\n * Check if all array elements are different/unique\n *\n * @param {Array} arr Array to check\n * @returns {Boolean} Whether all elements are different/unique\n */\nexport function arrayAllUnique(arr) {\n  const tmp = new Set(arr);\n  if (tmp.size === arr.length) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Check if array is nested/multidimensional\n *\n * @param {Array} arr array to check for nesting\n * @returns {Boolean} Boolean indicating whether array is multidimensional\n */\nexport function isMultidimensional(arr) {\n  return arr.filter(Array.isArray).length !== 0;\n}\n\n/**\n * Get maximum number of spendable points for a talent\n *\n * @param {Array} talentValues array of values for a given talent\n * @returns {Number} Number of maximum spendable points\n */\nexport function getMaxTalentCount(talentValues) {\n  let max;\n  if (!isMultidimensional(talentValues)) {\n    max = talentValues.length;\n  } else {\n    // All multidimensional arrays should be same length (checked by unit test)\n    max = talentValues[0].length;\n  }\n  return max;\n}\n\n/**\n * Replace talent text placeholders (e.g. `${1}`) with selected values\n *\n * @param {string} text Full talent text\n * @param {Array} talentValues Array (or multidimensional array) of values for the talent\n * @param {Number} replacementIdx Index of the value to use as replacement\n * @returns {string} Talent text with placeholders replaced\n */\nexport function replaceTalentText(text, talentValues, replacementIdx) {\n  let newText = text;\n\n  if (isMultidimensional(talentValues)) {\n    for (let i = 0; i < talentValues.length; i++) {\n      let re = new RegExp(`\\\\$\\\\{${i + 1}\\\\}`, 'g');\n      newText = newText.replace(re, talentValues[i][replacementIdx]);\n    }\n  } else {\n    newText = newText.replace(/\\$\\{1\\}/g, talentValues[replacementIdx]);\n  }\n\n  return newText;\n}\n\n/**\n * Get the full name of a talent tree (e.g. Skill, Garrison). The name\n * depends on the tree color and the selected commander\n *\n * @param {string} color Color of the tree to retrieve the name for\n * @param {string} commander Name of the commander\n * @returns {string} full tree name\n */\nexport function getTreeName(color, commander) {\n  const commanderData = Commanders[commander];\n  if (commanderData) {\n    return commanderData[color];\n  }\n}\n\n/**\n * Set the window title with commander name and talents spent in each tree\n *\n * @param {string} commander Full name of the commander\n * @param {Number[]} r Array of red tree values\n * @param {Number[]} y Array of yellow tree values\n * @param {Number[]} b Array of blue tree values\n * @param {string} [sep='/'] Separator to use between point totals\n */\nexport function setTitle(commander, r, y, b, sep = '/') {\n  const newTitle = `${createSummaryString(commander, r, y, b, sep)} | ${title}`;\n  document.title = newTitle;\n}\n\n/**\n * Create a string with commander name and talents spent in each tree\n *\n * @param {string} commander Full name of the commander\n * @param {Number[]} r Array of red tree values\n * @param {Number[]} y Array of yellow tree values\n * @param {Number[]} b Array of blue tree values\n * @param {string} [sep='/'] Separator to use between point totals\n * @returns {string} String summarizing the commander and points spent\n */\nexport function createSummaryString(commander, r, y, b, sep = '/') {\n  const rSpent = sumArray(r);\n  const ySpent = sumArray(y);\n  const bSpent = sumArray(b);\n  const name = Commanders[commander].shortName || commander;\n  return `${name} (${rSpent}${sep}${ySpent}${sep}${bSpent})`;\n}\n\n/**\n * Get current talent URL\n *\n * @param {Boolean} embed Should returned URL be embeddable?\n * @returns {String} Current/embeddable URL\n */\nexport function getURL(embed = false) {\n  if (embed) {\n    return `${window.location.origin}/${window.location.search.replace(\n      '?',\n      '?embed;'\n    )}`;\n  } else {\n    if (isEmbed(window.location.search)) {\n      return `${window.location.origin}/${window.location.search.replace(\n        '?embed;',\n        '?'\n      )}`;\n    } else {\n      return `${window.location.origin}/${window.location.search}`;\n    }\n  }\n}\n\n/**\n * Check whether app is launched in embed mode\n *\n * @param {String} path URL path to check for embed\n * @returns {Boolean} Whether URL path contains an embed directive\n */\nexport function isEmbed(path) {\n  return path.includes('embed') ? true : false;\n}\n\n/**\n * Detect if device is touch enabled\n *\n * @returns {Boolean} Whether device is touch or not\n */\nexport function isTouchDevice() {\n  if (window.matchMedia('(pointer: coarse)').matches) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Check whether user is new or returning\n *\n * @returns {Boolean} Whether user is new or returning\n */\nexport function isNewUser() {\n  if (\n    !localStorage.getItem('isNewUser') ||\n    JSON.parse(localStorage.getItem('isNewUser') === true)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Check whether release is an upgrade. Ignores hotfix/patch releases\n *\n * @param {String} oldVer SemVer string of old version\n * @param {String} newVer SemVer string of new version\n * @returns {Boolean} Whether newVer is an upgrade\n */\nexport function isUpgrade(oldVer, newVer) {\n  // New users are never considered upgrades\n  if (isNewUser()) {\n    return false;\n  }\n\n  const [oldMajor, oldMinor] = oldVer.split('.').map(Number);\n  const [newMajor, newMinor] = newVer.split('.').map(Number);\n\n  if (newMajor > oldMajor || newMinor > oldMinor) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Encode/compress the passed text\n *\n * @param {string} text Text to be encoded/compressed\n * @returns {string} Encoded/compressed version of the text\n */\nexport function encode(text) {\n  const encoded = text\n    .match(/(..?)/g)\n    .map(v => {\n      return valuesToLetters.hasOwnProperty(v) ? valuesToLetters[v] : v;\n    })\n    .join('');\n\n  return encoded;\n}\n\n/**\n * Decode encoded text\n *\n * @param {string} encoded Encoded form of the text\n * @returns {string} Decoded string\n */\nexport function decode(encoded) {\n  const decoded = encoded\n    .split('')\n    .map(k => {\n      return lettersToValues.hasOwnProperty(k) ? lettersToValues[k] : k;\n    })\n    .join('');\n\n  return decoded;\n}\n\nexport default {\n  sumArray,\n  arraysEqual,\n  arrayAllUnique,\n  isMultidimensional,\n  getMaxTalentCount,\n  replaceTalentText,\n  setTitle,\n  createSummaryString,\n  getURL,\n  isEmbed,\n  isTouchDevice,\n  isNewUser,\n  isUpgrade,\n  encode,\n  decode\n};\n","import React, { Component } from 'react';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Catch errors in any components below and re-render with error\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.errorInfo) {\n      // Error path\n      return (\n        <div>\n          <h3>Something broke!</h3>\n          <details style={{ whiteSpace: 'pre-wrap' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo.componentStack}\n          </details>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","/** Maximum number of talent points available in the game */\nexport const maxPoints = 74;\n\n// Max width of mobile/tablet devices (px)\nexport const mobileBreakpoint = 1280;\n\n/** Mapping value pairs to letters for encoding */\nexport const valuesToLetters = {\n  '00': 'a',\n  '01': 'b',\n  '02': 'c',\n  '03': 'd',\n  '04': 'e',\n  '10': 'f',\n  '11': 'g',\n  '12': 'h',\n  '13': 'i',\n  '14': 'j',\n  '20': 'k',\n  '21': 'l',\n  '22': 'm',\n  '23': 'n',\n  '24': 'o',\n  '30': 'p',\n  '31': 'q',\n  '32': 'r',\n  '33': 's',\n  '34': 't',\n  '35': 'u',\n  '40': 'v',\n  '41': 'w',\n  '42': 'x',\n  '43': 'y',\n  '44': 'z'\n};\n\n/** Mapping letters to value pairs for decoding */\nexport const lettersToValues = {\n  a: '00',\n  b: '01',\n  c: '02',\n  d: '03',\n  e: '04',\n  f: '10',\n  g: '11',\n  h: '12',\n  i: '13',\n  j: '14',\n  k: '20',\n  l: '21',\n  m: '22',\n  n: '23',\n  o: '24',\n  p: '30',\n  q: '31',\n  r: '32',\n  s: '33',\n  t: '34',\n  u: '35',\n  v: '40',\n  w: '41',\n  x: '42',\n  y: '43',\n  z: '44'\n};\n","var map = {\n\t\"./v1/Attack.json\": 129\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 128;","var map = {\n\t\"./v1/Archer.json\": 131\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 130;","var map = {\n\t\"./v1/Cavalry.json\": 133\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 132;","var map = {\n\t\"./v1/Conquering.json\": 135\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 134;","var map = {\n\t\"./v1/Defense.json\": 137\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 136;","var map = {\n\t\"./v1/Garrison.json\": 139\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 138;","var map = {\n\t\"./v1/Gathering.json\": 141\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 140;","var map = {\n\t\"./v1/Infantry.json\": 143\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 142;","var map = {\n\t\"./v1/Integration.json\": 145\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 144;","var map = {\n\t\"./v1/Leadership.json\": 147\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 146;","var map = {\n\t\"./v1/Mobility.json\": 149\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 148;","var map = {\n\t\"./v1/Peacekeeping.json\": 151\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 150;","var map = {\n\t\"./v1/Skill.json\": 153\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 152;","var map = {\n\t\"./v1/Support.json\": 155\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 154;","var map = {\n\t\"./v1/Versatility.json\": 157\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 156;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from 'react';\nimport Joyride, { ACTIONS, EVENTS, STATUS } from 'react-joyride';\nimport { isNewUser } from './utils';\n\n/**\n * Component containing the guided tour for app onboarding\n *\n * @class GuidedTour\n * @extends {Component}\n */\nclass GuidedTour extends Component {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      run: isNewUser() ? true : false,\n      stepIndex: 0,\n      steps: [\n        {\n          content: 'Select your commander using this dropdown',\n          target: '#select-commander',\n          placement: 'auto',\n          disableBeacon: true\n        },\n        {\n          content: 'View guides for the selected commander and check the number of points you have left to spend',\n          target: '#summary-panel',\n          placement: 'auto'\n        },\n        {\n          content: 'Check various stats given by your talent build',\n          target: '#stats-panel',\n          placement: 'auto'\n        },\n        {\n          content:\n            'Reset your talent build. This will delete all assigned talent points',\n          target: '#button-reset',\n          placement: 'auto'\n        },\n        {\n          content:\n            'Save a screenshot of your current talent build. No need to settle for those blurry in-game screenshots anymore!',\n          target: '#button-screenshot',\n          placement: 'auto'\n        },\n        {\n          content:\n            'Talent builds can be shared with a link. Click this to get your shareable link, or simply copy your current URL',\n          target: '#button-share',\n          placement: 'auto'\n        },\n        {\n          content:\n            'Change display settings, or activate additional functionality like Speed Mode',\n          target: '#select-settings'\n        },\n        {\n          content:\n            'Get additional info about the app. You can also restart the guided tour here',\n          target: '#nav-icon',\n          locale: { last: 'Finish' }\n        }\n      ]\n    };\n  }\n\n  /**\n   * Restart the guided tour by resetting the current tour step\n   *\n   * @memberof GuidedTour\n   */\n  restartTour = () => {\n    this.setState({\n      run: true,\n      stepIndex: 0\n    });\n  };\n\n  /**\n   * Handle tour events (next step, tour close etc)\n   *\n   * @memberof GuidedTour\n   */\n  handleJoyrideCallback = data => {\n    const { action, index, status, type } = data;\n\n    if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\n      // Need to set our running state to false, so we can restart if we click start again.\n      this.setState({ run: false, stepIndex: 0 });\n    } else if (action === ACTIONS.CLOSE) {\n      this.setState({ run: false, stepIndex: 0 });\n    } else if (type === EVENTS.STEP_AFTER || type === EVENTS.TARGET_NOT_FOUND) {\n      // Update state to advance the tour\n      this.setState({ stepIndex: index + (action === ACTIONS.PREV ? -1 : 1) });\n    }\n  };\n\n  render() {\n    return (\n      <Joyride\n        run={this.state.run}\n        callback={this.handleJoyrideCallback}\n        stepIndex={this.state.stepIndex}\n        steps={this.state.steps}\n        continuous={true}\n        showProgress={true}\n        showSkipButton={false}\n        disableOverlayClose={true}\n        styles={{\n          options: {\n            primaryColor: 'var(--color-highlight)',\n            overlayColor: 'rgba(0, 0, 0, 0.6)'\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default GuidedTour;\n","import React, { useState } from 'react';\nimport ReactGA from 'react-ga';\nimport Spinner from 'react-bootstrap/Spinner';\nimport domtoimage from 'dom-to-image';\nimport watermark from 'watermarkjs';\nimport {\n  faTrashAlt,\n  faCamera,\n  faShareAlt\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { createSummaryString } from './utils';\nimport { homepage } from '../package.json';\n\nimport './styles/NavBarButtons.css';\n\n/**\n * Nav bar component containing main buttons\n *\n */\nfunction NavBarButtons(props) {\n  const [isDownloading, setIsDownloading] = useState(false);\n\n  /**\n   * Take a screenshot of the talent tree, add watermark, and download\n   *\n   * @param {boolean} [addLogo=true] Should a logo be rendered?\n   * @param {boolean} [addText=true] Should watermark text be rendered?\n   * @memberof NavBarButtons\n   */\n  function takeScreenshot(addLogo = true, addText = false) {\n    ReactGA.event({\n      category: 'App',\n      action: 'Screenshot',\n      label: props.commander\n    });\n\n    setIsDownloading(true);\n    const node = document.getElementById('tree-panel');\n    const dpr = window.devicePixelRatio || 1;\n\n    domtoimage\n      .toJpeg(node, {\n        height: node.offsetHeight * dpr,\n        width: node.offsetWidth * dpr,\n        style: {\n          transform: 'scale(' + dpr + ')',\n          transformOrigin: 'top left',\n          width: node.offsetWidth + 'px',\n          height: node.offsetHeight + 'px'\n        }\n      })\n      .then(nodeDataUrl => {\n        // add watermark\n        watermark([nodeDataUrl, `${process.env.PUBLIC_URL}/banner-sm.svg`])\n          .dataUrl((treePanel, logo) => {\n            const context = treePanel.getContext('2d', { alpha: false });\n            context.scale(dpr, dpr);\n\n            if (addLogo) {\n              const logoAspectRatio = logo.width / logo.height;\n              const logoResizedHeight = node.offsetHeight * 0.03;\n              const logoResizedWidth = logoResizedHeight * logoAspectRatio;\n\n              context.save();\n              context.globalAlpha = 1;\n              context.drawImage(\n                logo,\n                node.offsetWidth - logoResizedWidth - 5,\n                node.offsetHeight - logoResizedHeight - 5,\n                logoResizedWidth,\n                logoResizedHeight\n              );\n              context.restore();\n            }\n            if (addText) {\n              context.save();\n              context.globalAlpha = 0.15;\n\n              // lower font size until the text fits the canvas\n              const text = homepage.split('//')[1];\n              let fontsize = 70;\n              do {\n                fontsize--;\n                context.font = fontsize + 'px sans-serif';\n              } while (\n                context.measureText(text).width >\n                document.getElementById('tree-square-content').offsetWidth * 0.3\n              );\n\n              context.fillStyle = '#ffffff';\n              context.textAlign = 'center';\n              context.textBaseline = 'middle';\n              context.fillText(\n                text,\n                node.offsetWidth / 2,\n                node.offsetHeight / 2\n              );\n              context.restore();\n            }\n\n            return treePanel;\n          })\n          .then(dataUrl => {\n            // save\n            const img = document.createElement('a');\n            img.href = dataUrl;\n            img.download = `${createSummaryString(\n              props.commander,\n              props.red,\n              props.yellow,\n              props.blue,\n              '-'\n            )}.jpeg`;\n\n            document.body.appendChild(img);\n            img.click();\n            document.body.removeChild(img);\n            setIsDownloading(false);\n          });\n        watermark.destroy();\n      });\n  }\n\n  return (\n    <form className=\"form-inline\">\n      <button\n        id=\"button-reset\"\n        data-testid=\"button-reset\"\n        type=\"button\"\n        className=\"btn btn-sm btn-danger\"\n        disabled={props.commander | props.calcPointsSpent() ? false : true}\n        onClick={() => props.showReset()}\n      >\n        <FontAwesomeIcon icon={faTrashAlt} />\n        <span className=\"nav-button-text\">Reset</span>\n      </button>\n\n      <button\n        id=\"button-screenshot\"\n        data-testid=\"button-screenshot\"\n        type=\"button\"\n        disabled={props.commander | props.calcPointsSpent() ? false : true}\n        className=\"btn btn-sm btn-primary\"\n        onClick={() => takeScreenshot()}\n      >\n        {isDownloading ? (\n          <Spinner size=\"sm\" animation=\"border\" variant=\"light\" />\n        ) : (\n          <FontAwesomeIcon icon={faCamera} />\n        )}\n        <span className=\"nav-button-text\">Screenshot</span>\n      </button>\n\n      <button\n        id=\"button-share\"\n        data-testid=\"button-share\"\n        type=\"button\"\n        disabled={props.commander | props.calcPointsSpent() ? false : true}\n        className=\"btn btn-sm btn-success\"\n        onClick={() => props.showShare()}\n      >\n        <FontAwesomeIcon icon={faShareAlt} />\n        <span className=\"nav-button-text\">Share</span>\n      </button>\n    </form>\n  );\n}\n\nexport default NavBarButtons;\n","import React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport './styles/Tooltips.css';\n\n/**\n * Tooltip showing a hoverable 'help' tooltip\n *\n * @returns {Tooltip} Tooltip\n */\nexport function HelpTooltip(props) {\n  return (\n    <OverlayTrigger\n      placement=\"top\"\n      flip={true}\n      trigger={['hover', 'click']}\n      overlay={<Tooltip className=\"help-text\">{props.tooltip}</Tooltip>}\n    >\n      <FontAwesomeIcon icon={faQuestionCircle} className=\"help-icon\" />\n    </OverlayTrigger>\n  );\n}\n\n/**\n * General tooltip component\n *\n * @returns {Tooltip} Tooltip\n */\nexport function GeneralTooltip(props) {\n  return (\n    <OverlayTrigger\n      placement=\"top\"\n      flip={true}\n      trigger={['hover', 'click']}\n      overlay={<Tooltip className=\"help-text\">{props.tooltip}</Tooltip>}\n    >\n      {props.children}\n    </OverlayTrigger>\n  );\n}\n\nexport default { HelpTooltip, GeneralTooltip };\n","import React, { Component } from 'react';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport NavItem from 'react-bootstrap/NavItem';\nimport NavLink from 'react-bootstrap/NavLink';\nimport Form from 'react-bootstrap/Form';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { HelpTooltip } from './Tooltips';\n\nimport './styles/NavBarSettings.css';\n\n/**\n * Nav bar component containing drop down menu item for settings\n *\n * @class NavBarSettings\n * @extends {Component}\n */\nclass NavBarSettings extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      this.props.isShownInfoPanel !== nextProps.isShownInfoPanel ||\n      this.props.isShownValues !== nextProps.isShownValues ||\n      this.props.isShownTotals !== nextProps.isShownTotals ||\n      this.props.isSpeedMode !== nextProps.isSpeedMode ||\n      this.props.isShownMouseXY !== nextProps.isShownMouseXY ||\n      this.props.isShownTalentID !== nextProps.isShownTalentID ||\n      this.props.nodeSize !== nextProps.nodeSize\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    return (\n      <Dropdown alignRight as={NavItem} id=\"select-settings\">\n        <Dropdown.Toggle as={NavLink} data-testid=\"select-settings\">\n          <FontAwesomeIcon icon={faCog} />\n          <span className=\"nav-button-text\">Settings</span>\n        </Dropdown.Toggle>\n\n        <Dropdown.Menu id=\"settings-menu\" className=\"nav-menu\">\n          <Form>\n            <Form.Group id=\"settings-group\">\n              <Dropdown.Header>Display</Dropdown.Header>\n              <Form.Check\n                type=\"switch\"\n                id=\"settings-info-panel\"\n                data-testid=\"settings-info-panel\"\n                label=\"Info panel\"\n                checked={this.props.isShownInfoPanel}\n                onChange={e => this.props.toggleInfoPanel()}\n              />\n              <Form.Check\n                type=\"switch\"\n                id=\"settings-values\"\n                data-testid=\"settings-values\"\n                label=\"Node values\"\n                checked={this.props.isShownValues}\n                onChange={e => this.props.toggleValueDisplay()}\n              />\n              <Form.Check\n                type=\"switch\"\n                id=\"settings-totals\"\n                data-testid=\"settings-totals\"\n                label=\"Total spent\"\n                checked={this.props.isShownTotals}\n                onChange={e => this.props.toggleTotalDisplay()}\n              />\n\n              <Dropdown.Divider />\n\n              <Dropdown.Header>Node Size</Dropdown.Header>\n              <div className=\"d-flex flex-column\">\n                <ToggleButtonGroup\n                  name=\"size\"\n                  size=\"sm\"\n                  value={this.props.nodeSize}\n                  onChange={val => {\n                    this.props.toggleNodeSize(val);\n                  }}\n                >\n                  <ToggleButton\n                    type=\"radio\"\n                    name=\"radio\"\n                    value=\"S\"\n                    variant=\"outline-primary\"\n                  >\n                    S\n                  </ToggleButton>\n                  <ToggleButton\n                    type=\"radio\"\n                    name=\"radio\"\n                    value=\"M\"\n                    variant=\"outline-primary\"\n                  >\n                    M\n                  </ToggleButton>\n                  <ToggleButton\n                    type=\"radio\"\n                    name=\"radio\"\n                    value=\"L\"\n                    variant=\"outline-primary\"\n                  >\n                    L\n                  </ToggleButton>\n                </ToggleButtonGroup>\n\n                <Dropdown.Divider />\n                <Dropdown.Header>Expert</Dropdown.Header>\n                <div className=\"help-wrapper\">\n                  <Form.Check\n                    type=\"switch\"\n                    id=\"settings-speed-mode\"\n                    label=\"Speed mode\"\n                    checked={this.props.isSpeedMode}\n                    onChange={e => this.props.toggleSpeedMode()}\n                  />\n                  <HelpTooltip\n                    tooltip=\"No tooltips. Left/right click nodes directly to assign/remove\n            points\"\n                  />\n                </div>\n              </div>\n\n              {process.env.NODE_ENV === 'development' && (\n                <>\n                  <Dropdown.Divider />\n                  <Dropdown.Header>Dev Mode</Dropdown.Header>\n                  <Form.Check\n                    type=\"switch\"\n                    id=\"settings-mouse\"\n                    data-testid=\"settings-mouse\"\n                    label=\"Show mouse XY\"\n                    checked={this.props.isShownMouseXY}\n                    onChange={e => this.props.toggleMouseXY()}\n                  />\n                  <Form.Check\n                    type=\"switch\"\n                    id=\"settings-talentID\"\n                    label=\"Show talent ID\"\n                    checked={this.props.isShownTalentID}\n                    onChange={e => this.props.toggleTalentID()}\n                  />\n                </>\n              )}\n            </Form.Group>\n          </Form>\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default NavBarSettings;\n","import React, { Component } from 'react';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport NavItem from 'react-bootstrap/NavItem';\nimport NavLink from 'react-bootstrap/NavLink';\n\nimport Commanders from './data/commanders.json';\nimport './styles/NavBarCommander.css';\n\n/**\n * Nav bar component containing commander drop down\n *\n * @class NavBarCommander\n * @extends {Component}\n */\nclass NavBarCommander extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false\n    };\n\n    // Context bindings\n    this.toggleSelect = this.toggleSelect.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      this.props.commander !== nextProps.commander ||\n      this.state.isOpen !== nextState.isOpen\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Toggle open state of the commander select dropdown\n   *\n   * @memberof NavBarCommander\n   */\n  toggleSelect() {\n    this.setState(prevState => ({\n      isOpen: !prevState.isOpen\n    }));\n  }\n\n  /**\n   * Create a list of all available commanders (sorted)\n   *\n   * @returns {Dropdown.Item[]} Array of Dropdown items for all commanders\n   * @memberof NavBarCommander\n   */\n  createSelectItems() {\n    const commanderList = Object.keys(Commanders).sort();\n    let legendaryCommanders = [];\n    let epicCommanders = [];\n\n    commanderList.forEach(c => {\n      let selectItem = (\n        <Dropdown.Item\n          data-testid=\"menu-item\"\n          key={c}\n          onClick={() => {\n            this.props.changeCommander(c);\n          }}\n        >\n          <img\n            className=\"select-commander-icon\"\n            alt={c}\n            src={`${process.env.PUBLIC_URL}/images/commanders/${c}.png`}\n          ></img>\n          {Commanders[c]['shortName'] ? Commanders[c]['shortName'] : c}\n        </Dropdown.Item>\n      );\n\n      if (Commanders[c].tier === 'Legendary') {\n        legendaryCommanders.push(selectItem);\n      } else if (Commanders[c].tier === 'Epic') {\n        epicCommanders.push(selectItem);\n      }\n    });\n    return [\n      <Dropdown.Header key=\"header-legendary\">Legendary</Dropdown.Header>,\n      ...legendaryCommanders,\n      <Dropdown.Divider key=\"div1\" />,\n      <Dropdown.Header key=\"header-epic\">Epic</Dropdown.Header>,\n      ...epicCommanders\n    ];\n  }\n\n  render() {\n    return (\n      <Dropdown\n        id=\"select-commander\"\n        alignRight\n        as={NavItem}\n        show={this.state.isOpen}\n        onToggle={this.toggleSelect}\n      >\n        <Dropdown.Toggle as={NavLink} data-testid=\"select-commander\">\n          {this.props.commander ? (\n            <img\n              data-testid=\"select-commander-icon\"\n              className=\"select-commander-icon select-commander-icon-header\"\n              alt={this.props.commander}\n              src={`${process.env.PUBLIC_URL}/images/commanders/${this.props.commander}.png`}\n            ></img>\n          ) : (\n            <img\n              data-testid=\"select-commander-icon\"\n              className=\"select-commander-icon select-commander-icon-header\"\n              alt=\"Unknown commander\"\n              src={`${process.env.PUBLIC_URL}/images/commanders/unknown.png`}\n            ></img>\n          )}\n          <span className=\"nav-button-text\">\n            {this.props.commander\n              ? Commanders[this.props.commander]['shortName']\n                ? Commanders[this.props.commander]['shortName']\n                : this.props.commander\n              : ' Commander'}\n          </span>\n        </Dropdown.Toggle>\n\n        <Dropdown.Menu id=\"select-commander-menu\" className=\"nav-menu\">\n          {this.createSelectItems()}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default NavBarCommander;\n","import React from 'react';\nimport './styles/Announcement.css';\n\nfunction Announcement() {\n  return (\n    <>\n      <h1>{`New release: v1.3.0`}</h1>\n\n      <h2>New Features</h2>\n      <div>\n        I have received many requests for this feature and it is finally here:\n        screenshots!\n        <br />\n        <br />\n        Click the Screenshot button in the top navigation bar to take a\n        screenshot of your current talent build. Whatever you see in the middle talent\n        tree window will be what gets saved.\n        <br />\n        <br />\n        Don't settle for those blurry in-game screenshots anymore!\n      </div>\n      <img\n        src={`${process.env.PUBLIC_URL}/screenshots/screenshot.png`}\n        className=\"announce-img announce-img-border\"\n        alt=\"guide\"\n      ></img>\n\n      <hr className=\"announce-hr\" />\n\n      <div>\n        Two new legendary commanders have been added: Artemisia I and Ramesses\n        II. This includes full talent trees as well as commander guides.\n      </div>\n      <img\n        src={`${process.env.PUBLIC_URL}/screenshots/artemisia_ramesses.png`}\n        className=\"announce-img\"\n        alt=\"guide\"\n      ></img>\n\n      <h2>Other Changes</h2>\n      <ul>\n        <li>\n          Created a new icon and logo for the website\n        </li>\n        <li>\n          Commander image sizes have been reduced, so the commander list should\n          load faster. Image quality has not been reduced.\n        </li>\n      </ul>\n\n      <h2>Bug Fixes</h2>\n      <ul>\n        <li>\n          Fixed a bug where new users would always see the announcement window.\n        </li>\n        <li>\n          Fixed some talent description typos.\n        </li>\n      </ul>\n    </>\n  );\n}\n\nexport default Announcement;\n","import React, { Component } from 'react';\nimport ReactGA from 'react-ga';\nimport Announcement from './Announcement';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport {\n  faExclamationTriangle,\n  faInfoCircle,\n  faTrashAlt,\n  faShareAlt,\n  faLink,\n  faCode,\n  faCopy,\n  faBullhorn\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  TwitterShareButton,\n  WhatsappShareButton,\n  RedditShareButton,\n  WeiboShareButton,\n  PocketShareButton,\n  EmailShareButton,\n  TwitterIcon,\n  WhatsappIcon,\n  RedditIcon,\n  PocketIcon,\n  EmailIcon,\n  WeiboIcon\n} from 'react-share';\n\nimport {\n  title,\n  author,\n  contributors,\n  // repository,\n  bugs,\n  version\n} from '../package.json';\nimport { getURL } from './utils';\nimport './styles/Modals.css';\n\n/**\n * Modal displaying warning about an invalid build retrived from URL\n *\n * @class InvalidBuildModal\n * @extends {Component}\n */\nexport class InvalidBuildModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: true\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  render() {\n    return (\n      <Modal centered show={this.state.modal} onHide={this.toggle}>\n        <Modal.Header closeButton>\n          <span>\n            <FontAwesomeIcon\n              icon={faExclamationTriangle}\n              className=\"modal-icon\"\n            />\n          </span>\n          Invalid Talent Build\n        </Modal.Header>\n        <Modal.Body className=\"modal-body\">\n          <div>\n            The talent build you're trying to view is invalid. Make sure you've\n            copied and pasted the link correctly.\n            <br />\n            <br />\n          </div>\n          <div data-testid=\"invalid-modal-body\">\n            <b>Reason:</b> {this.props.message}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={this.toggle}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\n/**\n * Modal displaying announcements\n *\n * @class AnnouncementModal\n * @extends {Component}\n */\nexport class AnnouncementModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal:\n        this.props.isNewUser ||\n        this.props.isEmbed ||\n        !this.props.isUpgrade ||\n        this.props.isInvalidBuild\n          ? false\n          : true\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  show() {\n    this.setState({ modal: true });\n  }\n\n  render() {\n    return (\n      <Modal\n        data-testid=\"announce-modal\"\n        centered\n        size=\"lg\"\n        show={this.state.modal}\n        onHide={this.toggle}\n      >\n        <Modal.Header closeButton>\n          <span>\n            <FontAwesomeIcon icon={faBullhorn} className=\"modal-icon\" />\n          </span>\n          Announcement\n        </Modal.Header>\n        <Modal.Body className=\"modal-body\">\n          <Announcement />\n          <hr className=\"announce-hr\" />\n          If you have any feature requests, or notice any website issues, you\n          can make a post{' '}\n          <a href={bugs.url} target=\"_blank\" rel=\"noopener noreferrer\">\n            here\n          </a>\n          .\n        </Modal.Body>\n        <Modal.Footer>\n          <span className=\"modal-reminder\">\n            ( You can view this announcement again on the Info page\n            <FontAwesomeIcon icon={faInfoCircle} className=\"modal-icon\" />)\n          </span>\n          <Button variant=\"primary\" onClick={this.toggle}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\n/**\n * Modal displaying information about the application\n *\n * @class AboutModal\n * @extends {Component}\n */\nexport class AboutModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.modal !== nextState.modal) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  getContributors() {\n    let contributorsList = contributors.map((c, i) => [\n      i > 0 && ', ',\n      <a href={c.url} target=\"_blank\" rel=\"noopener noreferrer\" key={c.name}>\n        {c.name}\n      </a>\n    ]);\n\n    return contributorsList;\n  }\n\n  showDonate() {\n    ReactGA.event({\n      category: 'App',\n      action: 'Donate'\n    });\n  }\n\n  render() {\n    return (\n      <Modal centered show={this.state.modal} onHide={this.toggle}>\n        <Modal.Header closeButton>\n          <span>\n            <FontAwesomeIcon icon={faInfoCircle} className=\"modal-icon\" />\n          </span>\n          {title}\n        </Modal.Header>\n\n        <Modal.Body>\n          <Tabs defaultActiveKey=\"about\" className=\"tab-title\">\n            <Tab eventKey=\"about\" title=\"About\">\n              <div>\n                <img\n                  id=\"modal-app-icon\"\n                  src={`${process.env.PUBLIC_URL}/logo.svg`}\n                  alt=\"RoK Talents Logo\"\n                ></img>\n                Talent builder for Rise of Kingdoms. Best viewed on PC/laptop.\n              </div>\n              <br />\n              <div>\n                <span className=\"about-label\">App version:</span> {version}\n              </div>\n              <div>\n                <span className=\"about-label\">Creator:</span>{' '}\n                <a href={author.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {author.name}\n                </a>\n              </div>\n              <div>\n                <span className=\"about-label\">Contributors:</span>{' '}\n                {this.getContributors()}\n              </div>\n              {/* <div>\n                <span className=\"about-label\">Code:</span>{' '}\n                <a\n                  href={repository.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  GitHub\n                </a>\n              </div> */}\n              <div>\n                <span className=\"about-label\">Report bug:</span>{' '}\n                <a href={bugs.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  Submit\n                </a>\n              </div>\n              <div>\n                <span className=\"about-label\">Support development:</span>{' '}\n                <a\n                  href=\"https://www.buymeacoffee.com/simonho\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <img\n                    id=\"coffee\"\n                    src=\"https://cdn.buymeacoffee.com/buttons/default-orange.png\"\n                    alt=\"Buy Me A Coffee\"\n                    onClick={this.showDonate}\n                  ></img>\n                </a>\n              </div>\n            </Tab>\n\n            <Tab eventKey=\"releases\" title=\"Releases\">\n              <Button\n                id=\"button-releases\"\n                variant=\"success\"\n                size=\"sm\"\n                onClick={() => {\n                  this.toggle();\n                  this.props.toggleAnnounce();\n                }}\n              >\n                View latest release\n              </Button>\n            </Tab>\n\n            <Tab eventKey=\"instructions\" title=\"Instructions\">\n              <ol>\n                <li>Choose commander in the top-right dropdown list</li>\n                <li>Assign points by clicking on talent nodes</li>\n                <li>Check your build stats in the Stats panel</li>\n                <li>\n                  Click the Share button to get a{' '}\n                  <strong>shareable link</strong> to your build\n                </li>\n              </ol>\n              <Button\n                id=\"button-tour\"\n                variant=\"success\"\n                size=\"sm\"\n                onClick={() => {\n                  this.toggle();\n                  this.props.toggleTour();\n                }}\n              >\n                Show Guided Tour\n              </Button>\n            </Tab>\n          </Tabs>\n        </Modal.Body>\n      </Modal>\n    );\n  }\n}\n\n/**\n * Modal displaying reset/delete confirmation\n *\n * @class ResetModal\n * @extends {Component}\n */\nexport class ResetModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.modal !== nextState.modal) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  render() {\n    return (\n      <Modal centered show={this.state.modal} onHide={this.toggle}>\n        <Modal.Header closeButton>\n          <span>\n            <FontAwesomeIcon icon={faTrashAlt} className=\"modal-icon\" />\n          </span>\n          Reset\n        </Modal.Header>\n\n        <Modal.Body className=\"modal-body\">\n          <div>Are you sure you want to reset the talent build?</div>\n          <div>This will remove all assigned talent points.</div>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button\n            variant=\"danger\"\n            onClick={() => {\n              this.props.resetTalents();\n              this.toggle();\n            }}\n          >\n            Reset\n          </Button>\n          <Button variant=\"secondary\" onClick={this.toggle}>\n            Cancel\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\n/**\n * Modal displaying sharing options for talent build\n *\n * @class ShareModal\n * @extends {Component}\n */\nexport class ShareModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.modal !== nextState.modal) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  copyURL() {\n    const input = document.getElementById('url');\n    input.readOnly = true;\n    input.select();\n    document.execCommand('copy');\n    document.getElementById('copyButton').innerHTML = '\\u2713';\n    ReactGA.event({\n      category: 'Share',\n      action: 'Copy URL'\n    });\n  }\n\n  copyEmbedURL() {\n    const input = document.getElementById('url-embed');\n    input.readOnly = true;\n    input.select();\n    document.execCommand('copy');\n    document.getElementById('copyEmbedButton').innerHTML = '\\u2713';\n    ReactGA.event({\n      category: 'Share',\n      action: 'Copy Embed URL'\n    });\n  }\n\n  shareSocial() {\n    ReactGA.event({\n      category: 'Share',\n      action: 'Share social media'\n    });\n  }\n\n  render() {\n    return (\n      <Modal centered show={this.state.modal} onHide={this.toggle}>\n        <Modal.Header closeButton>\n          <span>\n            <FontAwesomeIcon icon={faShareAlt} className=\"modal-icon\" />\n          </span>\n          Share Talent Build\n        </Modal.Header>\n\n        <Modal.Body>\n          <Tabs defaultActiveKey=\"link\" className=\"tab-title\">\n            <Tab eventKey=\"link\" title=\"Link\">\n              <div className=\"share-modal-label\">\n                Shareable link to this talent build:\n              </div>\n\n              <div className=\"input-group mb-3\">\n                <div className=\"input-group-prepend\">\n                  <span className=\"input-group-text\">\n                    <FontAwesomeIcon icon={faLink} />\n                  </span>\n                </div>\n                <input\n                  id=\"url\"\n                  type=\"text\"\n                  className=\"form-control\"\n                  defaultValue={getURL()}\n                  readOnly\n                ></input>\n                <div className=\"input-group-append\">\n                  <button\n                    id=\"copyButton\"\n                    className=\"btn btn-success\"\n                    type=\"button\"\n                    onClick={this.copyURL}\n                  >\n                    <FontAwesomeIcon icon={faCopy} />\n                  </button>\n                </div>\n              </div>\n\n              <hr />\n\n              <div className=\"share-modal-label\">Share to social media:</div>\n\n              <div id=\"share-modal-social\" onClick={this.shareSocial}>\n                <EmailShareButton url={window.location.href}>\n                  <EmailIcon size={32} round />\n                </EmailShareButton>\n                <RedditShareButton url={window.location.href}>\n                  <RedditIcon size={32} round />\n                </RedditShareButton>\n                <TwitterShareButton url={window.location.href}>\n                  <TwitterIcon size={32} round />\n                </TwitterShareButton>\n                <WeiboShareButton url={window.location.href}>\n                  <WeiboIcon size={32} round />\n                </WeiboShareButton>\n                <WhatsappShareButton url={window.location.href}>\n                  <WhatsappIcon size={32} round />\n                </WhatsappShareButton>\n                <PocketShareButton url={window.location.href}>\n                  <PocketIcon size={32} round />\n                </PocketShareButton>\n              </div>\n            </Tab>\n\n            <Tab eventKey=\"embed\" title=\"Embed\">\n              <div>\n                If you have a blog or website, you can use the{' '}\n                <strong>HTML</strong> code below to embed this talent build\n                directly into your site.\n              </div>\n              <div>\n                <strong>Note</strong>: The embedded talent build will be\n                view-only.\n              </div>\n              <br />\n\n              <div className=\"input-group mb-3\">\n                <div className=\"input-group-prepend\">\n                  <span className=\"input-group-text\">\n                    <FontAwesomeIcon icon={faCode} />\n                  </span>\n                </div>\n                <textarea\n                  id=\"url-embed\"\n                  className=\"form-control\"\n                  rows={5}\n                  defaultValue={`<iframe height=\"400\" width=\"400\" allowfullscreen=\"true\" sandbox=\"allow-scripts allow-modals allow-same-origin allow-popups allow-popups-to-escape-sandbox\" src=\"${getURL(\n                    true\n                  )}\"></iframe>`}\n                  readOnly\n                ></textarea>\n                <div className=\"input-group-append\">\n                  <button\n                    id=\"copyEmbedButton\"\n                    className=\"btn btn-success\"\n                    type=\"button\"\n                    onClick={this.copyEmbedURL}\n                  >\n                    <FontAwesomeIcon icon={faCopy} />\n                  </button>\n                </div>\n              </div>\n            </Tab>\n          </Tabs>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={this.toggle}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default {\n  InvalidBuildModal,\n  AnnouncementModal,\n  AboutModal,\n  ResetModal,\n  ShareModal\n};\n","import React, { Component } from 'react';\nimport ReactGA from 'react-ga';\nimport MediaQuery from 'react-responsive';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport NavBarButtons from './NavBarButtons';\nimport NavBarSettings from './NavBarSettings';\nimport NavBarCommander from './NavBarCommander';\nimport { AboutModal, ResetModal, ShareModal } from './Modals';\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { title } from '../package.json';\nimport './styles/NavBar.css';\n\n/**\n * Nav bar component containing main application buttons/controls\n *\n * @class NavBar\n * @extends {Component}\n */\nclass NavBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      navOpen: false\n    };\n\n    // Context bindings\n    this.toggleNav = this.toggleNav.bind(this);\n    this.showReset = this.showReset.bind(this);\n    this.showShare = this.showShare.bind(this);\n  }\n\n  /**\n   * Toggle visibility of the nav bar collapse/expand menu icon\n   *\n   * @memberof NavBar\n   */\n  toggleNav() {\n    this.setState(prevState => ({\n      navOpen: !prevState.navOpen\n    }));\n  }\n\n  /**\n   * Control visibility of the \"About\" modal\n   *\n   * @memberof NavBar\n   */\n  showAbout() {\n    this.aboutModalRef.toggle();\n    ReactGA.event({\n      category: 'App',\n      action: 'View about modal'\n    });\n  }\n\n  /**\n   * Control visibility of the \"Reset\" modal\n   *\n   * @memberof NavBar\n   */\n  showReset() {\n    this.resetModalRef.toggle();\n  }\n\n  /**\n   * Control visibility of the \"Share\" modal\n   *\n   * @memberof NavBar\n   */\n  showShare() {\n    this.shareModalRef.toggle();\n    ReactGA.event({\n      category: 'Share',\n      action: 'View share modal'\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <AboutModal\n          ref={component => (this.aboutModalRef = component)}\n          toggleTour={this.props.toggleTour}\n          toggleAnnounce={this.props.toggleAnnounce}\n        />\n        <ResetModal\n          ref={component => (this.resetModalRef = component)}\n          resetTalents={this.props.resetTalents}\n        />\n        <ShareModal ref={component => (this.shareModalRef = component)} />\n\n        <Navbar\n          variant=\"light\"\n          className={this.props.isSpeedMode ? 'nav-speed' : 'navbar'}\n        >\n          <Navbar.Brand href=\"/\">\n            <img\n              id=\"nav-app-icon\"\n              src={`${process.env.PUBLIC_URL}/icon.svg`}\n              alt=\"RoK Talents Logo\"\n            ></img>\n          </Navbar.Brand>\n\n          <MediaQuery minDeviceWidth={450}>\n            <Navbar.Brand href=\"/\">{title}</Navbar.Brand>\n          </MediaQuery>\n\n          <Navbar.Brand\n            id=\"nav-icon\"\n            className=\"mr-auto\"\n            style={{ cursor: 'pointer' }}\n            onClick={() => this.showAbout(true)}\n          >\n            <FontAwesomeIcon icon={faInfoCircle} />\n          </Navbar.Brand>\n\n          <Nav className=\"ml-auto\">\n            <NavBarButtons\n              calcPointsSpent={this.props.calcPointsSpent}\n              showReset={this.showReset}\n              showShare={this.showShare}\n              commander={this.props.commander}\n              red={this.props.red}\n              yellow={this.props.yellow}\n              blue={this.props.blue}\n            />\n\n            <NavBarSettings\n              toggleInfoPanel={this.props.toggleInfoPanel}\n              toggleTotalDisplay={this.props.toggleTotalDisplay}\n              toggleValueDisplay={this.props.toggleValueDisplay}\n              toggleNodeSize={this.props.toggleNodeSize}\n              toggleSpeedMode={this.props.toggleSpeedMode}\n              toggleMouseXY={this.props.toggleMouseXY}\n              toggleTalentID={this.props.toggleTalentID}\n              isShownInfoPanel={this.props.isShownInfoPanel}\n              isShownValues={this.props.isShownValues}\n              isShownTotals={this.props.isShownTotals}\n              isSpeedMode={this.props.isSpeedMode}\n              isShownMouseXY={this.props.isShownMouseXY}\n              isShownTalentID={this.props.isShownTalentID}\n              nodeSize={this.props.nodeSize}\n            />\n\n            <NavBarCommander\n              changeCommander={this.props.changeCommander}\n              commander={this.props.commander}\n            />\n          </Nav>\n        </Navbar>\n      </>\n    );\n  }\n}\n\nexport default NavBar;\n","import React from 'react';\nimport ReactGA from 'react-ga';\nimport { GeneralTooltip } from './Tooltips';\nimport Commanders from './data/commanders.json';\nimport './styles/SummaryPanel.css';\n\n/**\n * Summary panel component displaying commander info\n *\n */\nfunction SummaryPanel(props) {\n  function getGuides() {\n    if (Commanders[props.commander].guides) {\n      let guides = [];\n\n      for (let guide in Commanders[props.commander].guides) {\n        guides.push(\n          <GuideIcon key={guide} commander={props.commander} name={guide} />\n        );\n      }\n      return <div id=\"summary-panel-guides\">Guide: {guides}</div>;\n    }\n  }\n\n  return (\n    <div id=\"summary-panel\" className=\"info-box\">\n      <h1>{props.commander ? props.commander : 'Summary'}</h1>\n      <h3>{props.commander && Commanders[props.commander].title}</h3>\n      <h3>{props.commander && getGuides()}</h3>\n\n      <div id=\"summary-panel-summary\">\n        <p>Points remaining: {props.calcPointsRemaining()}</p>\n        <p>Points spent: {props.calcPointsSpent()}</p>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Icon for commander guides\n *\n * @returns {DOMElement} Icon linking to the external commander guide\n */\nfunction GuideIcon(props) {\n  function clickGuide() {\n    ReactGA.event({\n      category: 'Navigation',\n      action: `View guide (${props.name})`,\n      label: props.commander\n    });\n  }\n\n  return (\n    <GeneralTooltip tooltip={props.name}>\n      <a\n        href={Commanders[props.commander].guides[props.name]}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        onClick={clickGuide}\n      >\n        <img\n          className=\"summary-panel-guide-icon\"\n          src={`${process.env.PUBLIC_URL}/images/guides/${props.name}.png`}\n          alt={props.name}\n        ></img>\n      </a>\n    </GeneralTooltip>\n  );\n}\n\nexport default SummaryPanel;\n","import React, { Component } from 'react';\nimport { HelpTooltip } from './Tooltips';\n\nimport './styles/StatsPanel.css';\n\n/**\n * Stats panel component displaying stats about the current talent build\n *\n * @class StatsPanel\n * @extends {Component}\n */\nclass StatsPanel extends Component {\n  /**\n   * Get all calculated stats and their values\n   *\n   * @returns {DOMElement[]} Array of DOM elements containing stats and values\n   * @memberof StatsPanel\n   */\n  getAllStats() {\n    let allStats = [];\n    const keys = Object.keys(this.props.stats);\n    keys.sort();\n    for (var i = 0; i < keys.length; i++) {\n      allStats.push(\n        <p key={keys[i]}>{`${keys[i]}: ${this.props.stats[keys[i]]}%`}</p>\n      );\n    }\n    return allStats;\n  }\n\n  render() {\n    return (\n      <div id=\"stats-panel\" className=\"info-box\">\n        <h2>\n          Stats{' '}\n          <HelpTooltip tooltip=\"Totals only include unconditional and direct stat boosts. For example, does not include stats from rallies/garrison/% chance etc.\" />\n        </h2>\n        <div id=\"stats-panel-stats\">{this.getAllStats()}</div>\n      </div>\n    );\n  }\n}\n\nexport default StatsPanel;\n","import React, { Component } from 'react';\nimport ReactGA from 'react-ga';\nimport Collapse from 'react-bootstrap/Collapse';\nimport { HelpTooltip } from './Tooltips';\nimport { getMaxTalentCount, replaceTalentText } from './utils';\n\nimport Commanders from './data/commanders.json';\nimport './styles/StatsTalentsPanel.css';\n\n/**\n * Stats talents panel component containing selected main talents\n *\n * @class StatsTalentsPanel\n * @extends {Component}\n */\nclass StatsTalentsPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShownStatsTalents: false\n    };\n\n    // Context bindings\n    this.toggleStatsTalents = this.toggleStatsTalents.bind(this);\n  }\n\n  /**\n   * Toggles visibility of the main talents descriptions\n   *\n   * @memberof StatsTalentsPanel\n   */\n  toggleStatsTalents() {\n    this.setState(prevState => ({\n      isShownStatsTalents: !prevState.isShownStatsTalents\n    }));\n\n    ReactGA.event({\n      category: 'App',\n      action: 'Toggle stats talents'\n    });\n  }\n\n  /**\n   * Calculate an array of main talents that don't belong in any of\n   * the base stat categories\n   *\n   * @returns {DOMElement[]} Array of all selected main talents\n   * @memberof StatsTalentsPanel\n   */\n  calcStatsTalents() {\n    const commander = this.props.commander;\n    let talents = [];\n\n    ['red', 'yellow', 'blue'].forEach(color => {\n      const nodes = this.props[color];\n\n      if (nodes.some(values => values !== 0)) {\n        nodes.forEach((value, idx) => {\n          const talentInfo = this.props.treeData[Commanders[commander][color]][\n            idx + 1\n          ];\n\n          if (value > 0 && talentInfo.type === 'node-large') {\n            talents.push(\n              <div key={talentInfo.name} className={`stats-talents-main`}>\n                <div className=\"stats-talents-title\">\n                  <span className={`bullet bg-${color}`}></span>\n\n                  {`${talentInfo.name} (${value}/${getMaxTalentCount(\n                    talentInfo.values\n                  )})`}\n                </div>\n\n                <Collapse in={this.state.isShownStatsTalents}>\n                  <div className=\"stats-talents-text\">\n                    {replaceTalentText(\n                      talentInfo.text,\n                      talentInfo.values,\n                      value - 1\n                    )}\n                  </div>\n                </Collapse>\n              </div>\n            );\n          }\n        });\n      }\n    });\n\n    return talents;\n  }\n\n  render() {\n    const mainTalents = this.calcStatsTalents();\n    return (\n      <div\n        id=\"stats-talents\"\n        className=\"info-box\"\n        onClick={this.toggleStatsTalents}\n      >\n        <h2 id=\"stats-talents-title\">\n          Main Talents{' '}\n          <HelpTooltip tooltip=\"Expandable list of all selected main talents\" />\n        </h2>\n        <div data-testid=\"stats-talents\">\n          {mainTalents.length === 0 ? 'None' : mainTalents}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default StatsTalentsPanel;\n","import React, { Component } from 'react';\nimport MediaQuery from 'react-responsive';\nimport SummaryPanel from './SummaryPanel';\nimport StatsPanel from './StatsPanel';\nimport StatsTalentsPanel from './StatsTalentsPanel';\nimport ErrorBoundary from './Error';\nimport { isTouchDevice } from './utils';\n\nimport './styles/InfoPanel.css';\n\n/**\n * Info panel component displaying stats about the current talent build\n *\n * @class InfoPanel\n * @extends {Component}\n */\nclass InfoPanel extends Component {\n  render() {\n    return (\n      <div\n        id=\"info-panel\"\n        data-testid=\"info-panel\"\n        className={\n          this.props.isShownInfoPanel ? 'info-panel-open' : 'info-panel-closed'\n        }\n      >\n        <ErrorBoundary>\n          <div id=\"summary-panel-container\">\n            <SummaryPanel\n              commander={this.props.commander}\n              calcPointsRemaining={this.props.calcPointsRemaining}\n              calcPointsSpent={this.props.calcPointsSpent}\n            />\n            <MediaQuery orientation=\"portrait\">\n              <StatsPanel stats={this.props.stats} />\n            </MediaQuery>\n          </div>\n        </ErrorBoundary>\n\n        <MediaQuery orientation=\"landscape\">\n          <ErrorBoundary>\n            <StatsPanel stats={this.props.stats} />\n          </ErrorBoundary>\n\n          {!isTouchDevice() && (\n            <ErrorBoundary>\n              <StatsTalentsPanel\n                calcPointsSpent={this.props.calcPointsSpent}\n                commander={this.props.commander}\n                treeData={this.props.treeData}\n                red={this.props.red}\n                yellow={this.props.yellow}\n                blue={this.props.blue}\n              />\n            </ErrorBoundary>\n          )}\n        </MediaQuery>\n      </div>\n    );\n  }\n}\n\nexport default InfoPanel;\n","// Utility to map data files to object\nfunction loadTreeData(version) {\n  const treeData = {\n    Attack: require(`./v${version}/Attack.json`),\n    Archer: require(`./v${version}/Archer.json`),\n    Cavalry: require(`./v${version}/Cavalry.json`),\n    Conquering: require(`./v${version}/Conquering.json`),\n    Defense: require(`./v${version}/Defense.json`),\n    Garrison: require(`./v${version}/Garrison.json`),\n    Gathering: require(`./v${version}/Gathering.json`),\n    Infantry: require(`./v${version}/Infantry.json`),\n    Integration: require(`./v${version}/Integration.json`),\n    Leadership: require(`./v${version}/Leadership.json`),\n    Mobility: require(`./v${version}/Mobility.json`),\n    Peacekeeping: require(`./v${version}/Peacekeeping.json`),\n    Skill: require(`./v${version}/Skill.json`),\n    Support: require(`./v${version}/Support.json`),\n    Versatility: require(`./v${version}/Versatility.json`)\n  };\n\n  if (process.env.NODE_ENV === 'development') {\n    console.info(`Info: Loading game data version ${version}`);\n  }\n\n  return treeData;\n}\n\nexport default loadTreeData;\n","import React, { Component, Suspense } from 'react';\nimport ReactGA from 'react-ga';\nimport Spinner from 'react-bootstrap/Spinner';\nimport GuidedTour from './GuidedTour';\nimport NavBar from './NavBar';\nimport InfoPanel from './InfoPanel';\nimport { InvalidBuildModal, AnnouncementModal } from './Modals';\nimport ErrorBoundary from './Error';\nimport loadTreeData from './data/AllTrees';\nimport Commanders from './data/commanders.json';\nimport {\n  sumArray,\n  getMaxTalentCount,\n  getTreeName,\n  setTitle,\n  isTouchDevice,\n  isUpgrade,\n  isNewUser,\n  encode,\n  decode\n} from './utils';\nimport { maxPoints } from './values';\nimport { version, dataVersion } from '../package.json';\n\nimport './styles/App.css';\nimport './styles/fonts.css';\n\nconst TreePanel = React.lazy(() => import('./TreePanel'));\nlet treeData;\n\n/**\n * Main application component. Contains high level logic for managing application state\n *\n * @class App\n * @extends {Component}\n */\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.invalidModalFlag = false;\n    this.invalidBuildMessage = '';\n\n    // Context bindings\n    this.toggleInfoPanel = this.toggleInfoPanel.bind(this);\n    this.toggleTotalDisplay = this.toggleTotalDisplay.bind(this);\n    this.toggleValueDisplay = this.toggleValueDisplay.bind(this);\n    this.toggleNodeSize = this.toggleNodeSize.bind(this);\n    this.toggleSpeedMode = this.toggleSpeedMode.bind(this);\n    this.toggleMouseXY = this.toggleMouseXY.bind(this);\n    this.toggleTalentID = this.toggleTalentID.bind(this);\n    this.toggleAnnounce = this.toggleAnnounce.bind(this);\n    this.toggleTour = this.toggleTour.bind(this);\n    this.changeCommander = this.changeCommander.bind(this);\n    this.resetTalents = this.resetTalents.bind(this);\n    this.changeTalentValue = this.changeTalentValue.bind(this);\n    this.calcPointsSpent = this.calcPointsSpent.bind(this);\n    this.calcPointsRemaining = this.calcPointsRemaining.bind(this);\n\n    // Set initial state from query string\n    const urlParams = this.props.url.slice(1).split(';');\n\n    if (this.props.isEmbed) {\n      ReactGA.event({\n        category: 'Load',\n        action: 'Embed'\n      });\n    }\n\n    switch (urlParams.length) {\n      case 1: // blank url\n        this.state = this.getEmptyState();\n        treeData = loadTreeData(dataVersion);\n        this.updateURL('clear');\n        ReactGA.event({\n          category: 'Load',\n          action: 'New'\n        });\n        break;\n      case 5: // complete url\n      case 6: // embed url\n        // eslint-disable-next-line\n        let path, urlDataVersion, comID, red, yellow, blue;\n        if (urlParams.length === 5) {\n          [urlDataVersion, comID, red, yellow, blue] = urlParams;\n        } else if (urlParams.length === 6) {\n          [path, urlDataVersion, comID, red, yellow, blue] = urlParams;\n        }\n        urlDataVersion = parseInt(urlDataVersion);\n\n        const commanderName = Object.keys(Commanders).find(\n          key => Commanders[key]['id'] === comID\n        );\n\n        // Check for invalid build\n        if (urlDataVersion > dataVersion) {\n          this.invalidBuildMessage = 'Incorrect game data version';\n          this.invalidModalFlag = true;\n        } else if (!commanderName) {\n          this.invalidBuildMessage = 'Unknown commander ID';\n          this.invalidModalFlag = true;\n        } else {\n          this.state = this.getEmptyState();\n          treeData = loadTreeData(urlDataVersion);\n          this.state = {\n            ...this.state,\n            dataVersion: urlDataVersion,\n            commander: commanderName,\n            ...this.createZeroTalents(commanderName)\n          };\n\n          const colorPairs = [\n            [red, 'red'],\n            [yellow, 'yellow'],\n            [blue, 'blue']\n          ];\n\n          for (let color of colorPairs) {\n            // Decode and split talent string into array\n            let talents = decode(color[0])\n              .split('')\n              .map(Number);\n            const maxArray = this.createMaxValueArray(\n              this.state.commander,\n              color[1]\n            );\n\n            if (talents.length !== this.state[color[1]].length) {\n              // Check talent array is correct length\n              this.invalidBuildMessage = `Incorrect number of talents (${color[1]} tree)`;\n              this.invalidModalFlag = true;\n              break;\n            } else if (\n              // Check spent values are not too large\n              talents.some(function(el, idx) {\n                return el > maxArray[idx];\n              })\n            ) {\n              this.invalidBuildMessage = `Too many points assigned in talent (${color[1]} tree)`;\n              this.invalidModalFlag = true;\n              break;\n            } else {\n              // Store color array in state\n              this.state[color[1]] = talents;\n\n              // Calculate stats for the color\n              const treeName = getTreeName(color[1], commanderName);\n              for (let i = 0; i < talents.length; i++) {\n                const talentData = treeData[treeName][i + 1];\n                const stat = talentData['stats'];\n\n                if (talents[i] > 0 && stat) {\n                  const multiStat = Array.isArray(stat);\n                  if (multiStat) {\n                    for (let j = 0; j < stat.length; j++) {\n                      this.state.stats[stat[j]] +=\n                        talentData['values'][talents[i] - 1];\n                    }\n                  } else {\n                    this.state.stats[stat] +=\n                      talentData['values'][talents[i] - 1];\n                  }\n                }\n              }\n            }\n          }\n\n          // Check that the talent build has not overspent points\n          if (this.calcPointsRemaining() < 0) {\n            this.invalidBuildMessage = `Number of spent talent points exceeds maximum`;\n            this.invalidModalFlag = true;\n          }\n        }\n\n        if (this.invalidModalFlag) {\n          this.state = this.getEmptyState();\n          treeData = loadTreeData(dataVersion);\n          this.updateURL('clear');\n          ReactGA.event({\n            category: 'Load',\n            action: 'Error',\n            label: this.props.url\n          });\n        } else {\n          this.updateURL('update');\n          ReactGA.event({\n            category: 'Load',\n            action: 'Existing',\n            label: this.props.url\n          });\n        }\n        break;\n      default:\n        // Incorrect number of url params\n        this.invalidBuildMessage = `Incorrect number of build parameters (length: ${urlParams.length}, expected: 5)`;\n        this.invalidModalFlag = true;\n        this.state = this.getEmptyState();\n        treeData = loadTreeData(dataVersion);\n        this.updateURL('clear');\n        ReactGA.event({\n          category: 'Load',\n          action: 'Error',\n          label: this.props.url\n        });\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.isEmbed) {\n      localStorage.setItem('version', version);\n    }\n\n    if (isNewUser()) {\n      localStorage.setItem('isNewUser', false);\n    }\n  }\n\n  /**\n   * Get empty state values for new application instance. Also checks\n   * local storage for saved settings\n   *\n   * @returns {object} Object containing blank state values\n   * @memberof App\n   */\n  getEmptyState() {\n    let storage;\n\n    if (this.props.isEmbed) {\n      // Set default settings for embedded mode\n      storage = {\n        nodeSize: 'L',\n        isShownInfoPanel: false,\n        isShownValues: true,\n        isShownTotals: true,\n        isSpeedMode: false,\n        isShownMouseXY: false,\n        isShownTalentID: false\n      };\n    } else {\n      // Get/set default settings for regular mode\n      const isShownInfoPanel = JSON.parse(\n        localStorage.getItem('isShownInfoPanel')\n      );\n      const isShownValues = JSON.parse(localStorage.getItem('isShownValues'));\n      const isShownTotals = JSON.parse(localStorage.getItem('isShownTotals'));\n      const isSpeedMode = JSON.parse(localStorage.getItem('isSpeedMode'));\n      const isShownMouseXY = JSON.parse(localStorage.getItem('isShownMouseXY'));\n      const isShownTalentID = JSON.parse(\n        localStorage.getItem('isShownTalentID')\n      );\n\n      storage = {\n        nodeSize: localStorage.getItem('nodeSize') || 'M',\n        isShownInfoPanel: isShownInfoPanel === null ? true : isShownInfoPanel,\n        isShownValues: isShownValues === null ? true : isShownValues,\n        isShownTotals: isShownTotals === null ? true : isShownTotals,\n        isSpeedMode: isSpeedMode === null ? false : isSpeedMode,\n        isShownMouseXY: isShownMouseXY === null ? false : isShownMouseXY,\n        isShownTalentID: isShownTalentID === null ? false : isShownTalentID\n      };\n    }\n\n    return {\n      dataVersion: dataVersion,\n      commander: '',\n      red: [],\n      yellow: [],\n      blue: [],\n      stats: this.getEmptyStats(),\n      ...storage\n    };\n  }\n\n  /**\n   * Get object containing all stats and set them to 0\n   *\n   * @returns {object} Object containing stats with 0 values\n   * @memberof App\n   */\n  getEmptyStats() {\n    return { Attack: 0, Defense: 0, Health: 0, 'March Speed': 0 };\n  }\n\n  /**\n   * Update the current URL\n   *\n   * @param {string} method {update | clear} Should the new URL be updated\n   * with the new state or cleared (new app state)?\n   * @memberof App\n   */\n  updateURL(method) {\n    let queryString;\n\n    switch (method) {\n      case 'update':\n        queryString =\n          '?' +\n          (this.props.isEmbed ? 'embed;' : '') +\n          [\n            this.state.dataVersion,\n            Commanders[this.state.commander].id,\n            encode(this.state.red.join('')),\n            encode(this.state.yellow.join('')),\n            encode(this.state.blue.join(''))\n          ].join(';');\n\n        setTitle(\n          this.state.commander,\n          this.state.red,\n          this.state.yellow,\n          this.state.blue\n        );\n        break;\n      case 'clear':\n        queryString = '/';\n        break;\n      default:\n        break;\n    }\n    window.history.replaceState('', '', queryString);\n  }\n\n  /**\n   * Set blank state object for the newly selected commander,\n   * followed by `this.updateURL()`\n   *\n   * @param {string} commander Name of the commander being changed to\n   * @memberof App\n   */\n  changeCommander(commander) {\n    if (this.state.dataVersion !== dataVersion) {\n      treeData = loadTreeData(dataVersion);\n    }\n\n    const zeroTalents = this.createZeroTalents(commander);\n    this.setState(\n      {\n        dataVersion: dataVersion,\n        commander: commander,\n        ...zeroTalents,\n        stats: this.getEmptyStats()\n      },\n      () => {\n        this.updateURL('update');\n        this.treePanelRef.drawLines();\n\n        ReactGA.event({\n          category: 'Navigation',\n          action: 'Change commander',\n          label: commander\n        });\n      }\n    );\n\n    if (!isTouchDevice()) {\n      this.treePanelRef.resetPanZoom();\n    }\n  }\n\n  /**\n   * Create a new/blank state object for a commander. The individual talent\n   * tree arrays will be filled with an appropriate number of `0`\n   *\n   * @param {string} commander Name of commander to create empty talents for\n   * @returns {object} Object containing `0` arrays for each tree color\n   * @memberof App\n   */\n  createZeroTalents(commander) {\n    const numRed = Object.keys(treeData[Commanders[commander]['red']]).length;\n    const numYellow = Object.keys(treeData[Commanders[commander]['yellow']])\n      .length;\n    const numBlue = Object.keys(treeData[Commanders[commander]['blue']]).length;\n\n    const zeroTalents = {\n      red: Array(numRed).fill(0),\n      yellow: Array(numYellow).fill(0),\n      blue: Array(numBlue).fill(0)\n    };\n\n    return zeroTalents;\n  }\n\n  /**\n   * Set all tree node values to `0` for the currently selected commander\n   *\n   * @memberof App\n   */\n  resetTalents() {\n    ReactGA.event({\n      category: 'App',\n      action: 'Reset build'\n    });\n    this.changeCommander(this.state.commander);\n  }\n\n  /**\n   * Change the value of a single talent node. Followed by `this.updateURL()`\n   *\n   * @param {string} color Color of the tree the node belongs to\n   * @param {number} idx Index of the node in the tree/color array.\n   * @param {number} valueIdx Index of the changed value.\n   * @param {string} how {increase | decrease} Should node value be increased\n   *  or decreased?\n   * @memberof App\n   */\n  changeTalentValue(color, idx, valueIdx, how) {\n    let talent = treeData[Commanders[this.state.commander][color]][idx];\n    let stat = talent['stats'];\n    let multiStat = Array.isArray(stat);\n    let newArr = this.state[color];\n    let newStats = { ...this.state.stats };\n\n    if (how === 'increase') {\n      newArr[idx - 1] += 1;\n\n      // increase stat value\n      if (stat) {\n        if (multiStat) {\n          // multi-stat\n          stat.forEach(curStat => {\n            if (valueIdx === 0) {\n              newStats[curStat] += talent['values'][0];\n            } else {\n              newStats[curStat] +=\n                talent['values'][valueIdx] - talent['values'][valueIdx - 1];\n            }\n          });\n        } else {\n          // single stat\n          if (valueIdx === 0) {\n            newStats[stat] += talent['values'][0];\n          } else {\n            newStats[stat] +=\n              talent['values'][valueIdx] - talent['values'][valueIdx - 1];\n          }\n        }\n      }\n    } else if (how === 'decrease') {\n      newArr[idx - 1] -= 1;\n\n      // decrease stat value\n      if (stat) {\n        if (multiStat) {\n          // multi-stat\n          stat.forEach(curStat => {\n            if (valueIdx <= 1) {\n              newStats[curStat] -= talent['values'][0];\n            } else {\n              newStats[curStat] -=\n                talent['values'][valueIdx - 1] - talent['values'][valueIdx - 2];\n            }\n          });\n        } else {\n          // single stat\n          if (valueIdx <= 1) {\n            newStats[stat] -= talent['values'][0];\n          } else {\n            newStats[stat] -=\n              talent['values'][valueIdx - 1] - talent['values'][valueIdx - 2];\n          }\n        }\n      }\n    }\n\n    this.setState({ [color]: newArr, stats: newStats }, () =>\n      this.updateURL('update')\n    );\n  }\n\n  /**\n   * Get the maximum number of available points for each talent\n   *\n   * @param {string} commander Name of the commander\n   * @param {string} color Color of the tree to get max values for\n   * @returns {Number[]} Array of maximum available points for each talent in the tree\n   * @memberof App\n   */\n  createMaxValueArray(commander, color) {\n    let maxArray = [];\n\n    Object.keys(treeData[Commanders[commander][color]]).forEach(id => {\n      maxArray.push(\n        getMaxTalentCount(treeData[Commanders[commander][color]][id]['values'])\n      );\n    });\n\n    return maxArray;\n  }\n\n  /**\n   * Calculate the total number of talent points spent. This is just a sum\n   * of all the color/tree array values\n   *\n   * @param {string} color Color of the tree to sum. Omitting this param sums\n   * across all trees\n   * @returns {number} Total number of talent points spent\n   * @memberof App\n   */\n  calcPointsSpent(color = 'total') {\n    let points;\n\n    if (color === 'total') {\n      points = [...this.state.red, ...this.state.yellow, ...this.state.blue];\n    } else {\n      points = [...this.state[color]];\n    }\n\n    return sumArray(points);\n  }\n\n  /**\n   * Calculate number of remaining talent points available to be spent\n   *\n   * @returns {number} Number of remaining talent points\n   * @memberof App\n   */\n  calcPointsRemaining() {\n    return maxPoints - this.calcPointsSpent();\n  }\n\n  /**\n   * Toggle display of info panel\n   *\n   * @memberof App\n   */\n  toggleInfoPanel() {\n    this.setState(\n      prevState => ({\n        isShownInfoPanel: !prevState.isShownInfoPanel\n      }),\n      () => {\n        this.treePanelRef.repaint();\n        localStorage.setItem('isShownInfoPanel', this.state.isShownInfoPanel);\n      }\n    );\n\n    ReactGA.event({\n      category: 'Settings',\n      action: 'Toggle info panel'\n    });\n  }\n\n  /**\n   * Toggle display of total number of points spent in each tree\n   *\n   * @memberof App\n   */\n  toggleTotalDisplay() {\n    this.setState(\n      prevState => ({\n        isShownTotals: !prevState.isShownTotals\n      }),\n      () => {\n        localStorage.setItem('isShownTotals', this.state.isShownTotals);\n      }\n    );\n\n    ReactGA.event({\n      category: 'Settings',\n      action: 'Toggle tree totals'\n    });\n  }\n\n  /**\n   * Toggle display of node values\n   *\n   * @memberof App\n   */\n  toggleValueDisplay() {\n    this.setState(\n      prevState => ({\n        isShownValues: !prevState.isShownValues\n      }),\n      () => {\n        localStorage.setItem('isShownValues', this.state.isShownValues);\n      }\n    );\n\n    ReactGA.event({\n      category: 'Settings',\n      action: 'Toggle node values'\n    });\n  }\n\n  /**\n   * Toggle node size\n   *\n   * @param {string} size Desired node size\n   * @memberof App\n   */\n  toggleNodeSize(size) {\n    this.setState({ nodeSize: size }, () => {\n      this.treePanelRef.repaint();\n      localStorage.setItem('nodeSize', this.state.nodeSize);\n    });\n\n    ReactGA.event({\n      category: 'Settings',\n      action: 'Toggle node size',\n      label: size\n    });\n  }\n\n  /**\n   * Toggle speed mode\n   *\n   * @memberof App\n   */\n  toggleSpeedMode() {\n    this.setState(\n      prevState => ({\n        isSpeedMode: !prevState.isSpeedMode\n      }),\n      () => {\n        this.treePanelRef.drawLines();\n        localStorage.setItem('isSpeedMode', this.state.isSpeedMode);\n      }\n    );\n\n    ReactGA.event({\n      category: 'Settings',\n      action: 'Toggle speed mode'\n    });\n  }\n\n  /**\n   * Toggle mouse XY position display\n   *\n   * @memberof App\n   */\n  toggleMouseXY() {\n    this.setState(\n      prevState => ({\n        isShownMouseXY: !prevState.isShownMouseXY\n      }),\n      () => {\n        this.treePanelRef.toggleMouseListeners();\n        localStorage.setItem('isShownMouseXY', this.state.isShownMouseXY);\n      }\n    );\n  }\n\n  /**\n   * Toggle tooltip talent ID\n   *\n   * @memberof App\n   */\n  toggleTalentID() {\n    this.setState(\n      prevState => ({\n        isShownTalentID: !prevState.isShownTalentID\n      }),\n      () => {\n        localStorage.setItem('isShownTalentID', this.state.isShownTalentID);\n      }\n    );\n  }\n\n  /**\n   * Toggle guided tour\n   *\n   * @memberof App\n   */\n  toggleTour() {\n    this.tourRef.restartTour();\n  }\n\n  /**\n   * Toggle announcement\n   *\n   * @memberof App\n   */\n  toggleAnnounce() {\n    this.announceRef.show();\n  }\n\n  render() {\n    return (\n      <div id=\"app\">\n        {!this.props.isEmbed && (\n          <GuidedTour ref={component => (this.tourRef = component)} />\n        )}\n\n        {this.invalidModalFlag && (\n          <InvalidBuildModal message={this.invalidBuildMessage} />\n        )}\n\n        <AnnouncementModal\n          ref={component => (this.announceRef = component)}\n          isEmbed={this.props.isEmbed}\n          isUpgrade={\n            localStorage.getItem('version')\n              ? isUpgrade(localStorage.getItem('version'), version)\n              : true\n          }\n          isNewUser={isNewUser()}\n          isInvalidBuild={this.invalidModalFlag}\n        />\n\n        {!this.props.isEmbed && (\n          <ErrorBoundary>\n            <NavBar\n              toggleInfoPanel={this.toggleInfoPanel}\n              toggleTotalDisplay={this.toggleTotalDisplay}\n              toggleValueDisplay={this.toggleValueDisplay}\n              toggleNodeSize={this.toggleNodeSize}\n              toggleSpeedMode={this.toggleSpeedMode}\n              toggleMouseXY={this.toggleMouseXY}\n              toggleTalentID={this.toggleTalentID}\n              toggleAnnounce={this.toggleAnnounce}\n              toggleTour={this.toggleTour}\n              changeCommander={this.changeCommander}\n              calcPointsSpent={this.calcPointsSpent}\n              resetTalents={this.resetTalents}\n              commander={this.state.commander}\n              red={this.state.red}\n              yellow={this.state.yellow}\n              blue={this.state.blue}\n              nodeSize={this.state.nodeSize}\n              isShownInfoPanel={this.state.isShownInfoPanel}\n              isShownValues={this.state.isShownValues}\n              isShownTotals={this.state.isShownTotals}\n              isSpeedMode={this.state.isSpeedMode}\n              isShownMouseXY={this.state.isShownMouseXY}\n              isShownTalentID={this.state.isShownTalentID}\n            />\n          </ErrorBoundary>\n        )}\n\n        <div id=\"main-container\">\n          <Suspense\n            fallback={\n              <div id=\"spinner\">\n                <Spinner size=\"lg\" animation=\"border\" variant=\"light\" />\n                <br />\n                <span>Loading</span>\n              </div>\n            }\n          >\n            {!this.props.isEmbed && (\n              <ErrorBoundary>\n                <InfoPanel\n                  ref={component => (this.infoPanelRef = component)}\n                  calcPointsSpent={this.calcPointsSpent}\n                  calcPointsRemaining={this.calcPointsRemaining}\n                  treeData={treeData}\n                  commander={this.state.commander}\n                  red={this.state.red}\n                  yellow={this.state.yellow}\n                  blue={this.state.blue}\n                  stats={this.state.stats}\n                  isShownInfoPanel={this.state.isShownInfoPanel}\n                />\n              </ErrorBoundary>\n            )}\n\n            <ErrorBoundary>\n              <TreePanel\n                ref={component => (this.treePanelRef = component)}\n                changeCommander={this.changeCommander}\n                resetTalents={this.resetTalents}\n                changeTalentValue={this.changeTalentValue}\n                calcPointsSpent={this.calcPointsSpent}\n                calcPointsRemaining={this.calcPointsRemaining}\n                treeData={treeData}\n                dataVersion={this.state.dataVersion}\n                commander={this.state.commander}\n                red={this.state.red}\n                yellow={this.state.yellow}\n                blue={this.state.blue}\n                nodeSize={this.state.nodeSize}\n                isShownValues={this.state.isShownValues}\n                isShownTotals={this.state.isShownTotals}\n                isSpeedMode={this.state.isSpeedMode}\n                isShownMouseXY={this.state.isShownMouseXY}\n                isShownTalentID={this.state.isShownTalentID}\n                isEmbed={this.props.isEmbed}\n              />\n            </ErrorBoundary>\n          </Suspense>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactGA from 'react-ga';\nimport { isEmbed } from './utils';\nimport { homepage } from '../package.json';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nconst embed = isEmbed(window.location.search);\n\nif (window.self === window.top || embed) {\n  ReactGA.initialize('UA-114296077-2');\n  ReactGA.pageview('/');\n\n  const url = window.location.search;\n  ReactDOM.render(\n    <App url={url} isEmbed={embed} />,\n    document.getElementById('root')\n  );\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n} else {\n  ReactDOM.render(\n    <div>\n      Please visit the full website at{' '}\n      <a href={homepage} target=\"_blank\" rel=\"noopener noreferrer\">\n        {homepage.split('//')[1]}\n      </a>\n    </div>,\n    document.getElementById('root')\n  );\n}\n"],"sourceRoot":""}